<?xml version="1.0" encoding="ISO-8859-1" ?>

<!DOCTYPE struts-config PUBLIC
          "-//Apache Software Foundation//DTD Struts Configuration 1.2//EN"
          "http://jakarta.apache.org/struts/dtds/struts-config_1_2.dtd">

<struts-config>

<!-- ============ Form Bean Definitions =================================== -->

<form-beans>

    <form-bean name="bornMonsterForm"
		type="es.engade.thearsmonsters.http.view.actionforms.BornMonsterForm"/>

    <form-bean name="changePasswordForm"
		type="es.engade.thearsmonsters.http.view.actionforms.ChangePasswordForm"/>

    <form-bean name="changeResourcesForm"
		type="es.engade.thearsmonsters.http.view.actionforms.ChangeResourcesForm"/>

    <form-bean name="confirmationForm"
		type="es.engade.thearsmonsters.http.view.actionforms.ConfirmationForm"/>
		
     <form-bean name="monsterActionsToDoForm"
        type="es.engade.thearsmonsters.http.view.actionforms.MonsterActionsToDoForm"/>

    <form-bean name="loginForm"
		type="es.engade.thearsmonsters.http.view.actionforms.LoginForm"/>

    <form-bean name="userProfileForm"
		type="es.engade.thearsmonsters.http.view.actionforms.UserProfileForm"/>

</form-beans>


<!-- ============ Global Forward Definitions ============================== -->
<!-- Por ejemplo, se puede hacer return mapping.findForward("InternalError"); desde cualquier action -->

<global-forwards>
    <forward name="AuthenticationPage" path="/FrontPage.do" redirect="true"/>
    <forward name="AdminAuthenticationPage" path="/admin.do" redirect="true"/>
    <forward name="InternalError" path="/InternalError.do"/>
    <forward name="Confirmation" path="/Confirmation.do"/>
    <forward name="GameStart" path="/lair.do" redirect="true"/>
    <forward name="Monster" path="/Monster.do" redirect="true"/>
</global-forwards>


<!-- ============ Action Mapping Definitions ============================== -->
<!-- 
 Son las URLs disponibles en la aplicacion sin el .do.
  
 * Por convenio y claridad, todas las urls son underscored,                         
   es decir, en minusculas y separadas por "_". Si se posible no orientadas a acciones
   sino a recursos  (conceptos con subconceptos anidados). 
   Por ejemplo: "/ShowNewRoomsToBuild" es CamelCased y orientada a accion,
   en cambio "/lair/rooms/ready_to_build" es underscored y orientado a recursos.
   Otro ejemplo: "/ShowRoomTasks", oriantado a recursos seria mejor "/lair/room/tasks".                                  
 * Los nombres de las URLs deben ser comprensibles y desde el punto de vista        
   del usuario, no debe hacer referencia a detalles de la implementacion.                                
 * Las acciones que reciben el contenido de un formulario, por convenio, se van a poner con el sufijo "_action",  
   y si es posible se llamaran igual que la accion que carga ese formulario.     
-->

<action-mappings type="es.engade.thearsmonsters.http.controller.frontcontroller.ThearsmonstersActionMapping">
        		 
   
   <!-- ========== Lair Actions (/lair/_.do) ========== -->
        
    <!-- /Lair -->   
	<action path="/lair"
			type="es.engade.thearsmonsters.http.controller.actions.lair.LairAction"
            parameter=".Lair">
        <set-property property="authenticationRequired" value="true"/>
        <forward name="ShowLair" path=".Lair"/>
        <forward name="ShowBuilding" path=".Building"/></action>
        
    <!-- /ChangeResourcesForm --> 		 
    <action path="/lair/change_resources"
			type="es.engade.thearsmonsters.http.controller.actions.ThearsmonstersDefaultAction"
			parameter=".ChangeResourcesForm">
        <set-property property="authenticationRequired" value="true"/></action>
             
    <!--/ChangeResources -->
    <action path="/lair/change_resources_action"
			type="es.engade.thearsmonsters.http.controller.actions.lair.ChangeResourcesAction"
            name="changeResourcesForm" scope="request" validate="true"
            input=".ChangeResources">
        <set-property property="authenticationRequired" value="true"/>
        <forward name="ShowResults" path="/lair/change_resources.do"/></action>

    <!-- /NewRoomsAvaliable -->                                
    <action path="/lair/rooms/ready_to_build"
            type="es.engade.thearsmonsters.http.controller.actions.ThearsmonstersDefaultAction"
            parameter=".NewRoomsAvaliable">
        <set-property property="authenticationRequired" value="true"/></action>
         
    <!-- /SetRoomInWorksState -->   
    <action path="/lair/room/change_in_works_state"
			type="es.engade.thearsmonsters.http.controller.actions.lair.SetRoomInWorksStateAction">
        <set-property property="authenticationRequired" value="true"/>
        <forward name="ShowLair" path="/lair.do" redirect="true"/></action>
         
    <!-- /ShowRoomTasks -->
   <action path="/lair/room/tasks"
             type="es.engade.thearsmonsters.http.controller.actions.lair.ShowRoomTasksAction">
         <set-property property="authenticationRequired" value="true"/>
         <forward name="ShowRoomTasks" path=".ShowRoomTasks"/></action>
    
    
        
	<!-- ========== Monster Actions (/monsters/_.do) ========== -->

    <action path="/BornMonster"
			type="es.engade.thearsmonsters.http.controller.actions.monsters.BornMonsterAction"
        	name="bornMonsterForm" scope="request" validate="true"
            input=".BornMonsterForm">
        <set-property property="authenticationRequired" value="true"/>
        <forward name="EggsManagement" path="/EggsManagement.do" redirect="true"/></action>
        		 
    <action path="/BornMonsterForm"
			type="es.engade.thearsmonsters.http.controller.actions.ThearsmonstersDefaultAction"
			parameter=".BornMonsterForm">
        <set-property property="authenticationRequired" value="true"/></action>
        		 
    <action path="/BuyEgg"
			type="es.engade.thearsmonsters.http.controller.actions.monsters.BuyEggAction">
        <set-property property="authenticationRequired" value="true"/>
        <forward name="EggsManagement" 
        		 path="/EggsManagement.do" redirect="true"/></action>
        
    <action path="/EggsManagement"
			type="es.engade.thearsmonsters.http.controller.actions.monsters.EggsManagementAction"
            parameter=".EggsManagement">
        <set-property property="authenticationRequired" value="true"/>
        <forward name="EggsManagement"
                 path=".EggsManagement"/></action>
                 
    <action path="/ExecuteMonsterActions"
            type="es.engade.thearsmonsters.http.controller.actions.monsters.ExecuteMonsterActionsAction"
            name="monsterActionsToDoForm" scope="request" validate="true"
            input="/Monster.do">
        <set-property property="authenticationRequired" value="true"/></action> 
	
    <action path="/IncubateEgg"
			type="es.engade.thearsmonsters.http.controller.actions.monsters.IncubateEggAction">
        <set-property property="authenticationRequired" value="true"/>
        <forward name="EggsManagement" 
        		 path="/EggsManagement.do" redirect="true"/></action>
               
    <action path="/ShellEgg"
			type="es.engade.thearsmonsters.http.controller.actions.monsters.ShellEggAction"
            validate="true">
        <set-property property="authenticationRequired" value="true"/>
        <forward name="EggsManagement" 
        		 path="/EggsManagement.do" redirect="true"/></action>
                        
    <action path="/MetamorphosisToAdult"
			type="es.engade.thearsmonsters.http.controller.actions.monsters.MetamorphosisToAdultAction">
        <set-property property="authenticationRequired" value="true"/></action>
            
    <action path="/Monster"
			type="es.engade.thearsmonsters.http.controller.actions.monsters.MonsterAction"
            parameter=".Monster">
        <set-property property="authenticationRequired" value="true"/>
        <forward name="Monster" path=".Monster"/>
        <forward name="Monsters" path="/Monsters.do" redirect="true"/></action>
                                   
    <action path="/Monsters"
			type="es.engade.thearsmonsters.http.controller.actions.monsters.MonstersAction"
            parameter=".Monsters">
        <set-property property="authenticationRequired" value="true"/>
        <forward name="Monsters" path=".Monsters"/></action>
        
    
        
	<!-- ========== UserProfile Actions (/userprofile/_.do) ========== -->
	     
    <action path="/ChangePassword"
			type="es.engade.thearsmonsters.http.controller.actions.userprofile.ChangePasswordAction"
            name="changePasswordForm" scope="request" validate="true"
            input=".ChangePassword">
        <set-property property="authenticationRequired" value="true"/>
        <forward name="EditUserProfile" 
        		 path="/EditUserProfile.do" redirect="true"/></action>
        		 
    <action path="/EditUserProfile"
			type="es.engade.thearsmonsters.http.controller.actions.userprofile.EditUserProfileAction"
            name="userProfileForm" scope="request" validate="false">
        <forward name="RegisterUserForm" path=".RegisterUser"/>
        <forward name="UpdateUserProfileDetailsForm" 
        		 path=".UpdateUserProfileDetails"/></action>
            
    <action path="/EditUserProfileForUpdating"
            type="org.apache.struts.actions.ForwardAction"
            parameter="/EditUserProfile.do">
        <set-property property="authenticationRequired" value="true"/></action>

    <action path="/Login"
			type="es.engade.thearsmonsters.http.controller.actions.userprofile.LoginAction"
            name="loginForm" scope="request" validate="true"
            input=".FrontPage"></action>

    <action path="/Logout"
			type="es.engade.thearsmonsters.http.controller.actions.userprofile.LogoutAction"/>

    <action path="/RegisterUser"
			type="es.engade.thearsmonsters.http.controller.actions.userprofile.RegisterUserAction"
            name="userProfileForm" scope="request" validate="true"
            input="/EditUserProfile.do"/>
            
    <action path="/ShowChangePassword"
            type="es.engade.thearsmonsters.http.controller.actions.ThearsmonstersDefaultAction"
            parameter=".ChangePassword">
        <set-property property="authenticationRequired" value="true"/></action>
                 
    <action path="/UpdateUserProfileDetails"
			type="es.engade.thearsmonsters.http.controller.actions.userprofile.UpdateUserProfileDetailsAction"
            name="userProfileForm" scope="request" validate="true"
            input="/EditUserProfile.do">
        <set-property property="authenticationRequired" value="true"/>
        <forward name="EditUserProfile" 
        		 path="/EditUserProfile.do"/></action>
    
    
        		 
   	<!-- ========== Other in-game Actions (/_.do) ========== -->
   	
	<action path="/Guild"
            type="es.engade.thearsmonsters.http.controller.actions.ThearsmonstersDefaultAction"
            parameter=".Guild">
        <set-property property="authenticationRequired" value="true"/></action>
	
    <action path="/InternalError"
            type="org.apache.struts.actions.ForwardAction"
            parameter=".InternalError"/>
            
    <action path="/Confirmation"
			type="es.engade.thearsmonsters.http.controller.actions.Confirmation">
        <set-property property="authenticationRequired" value="true"/>
        <forward name="ShowConfirmation" path=".Confirmation"/></action>
                 			
	<action path="/Missions"
            type="es.engade.thearsmonsters.http.controller.actions.ThearsmonstersDefaultAction"
            parameter=".Missions">
        <set-property property="authenticationRequired" value="true"/></action>
    
             
    <!-- ========= FrontPage Actions (/_.do) ========== -->

    <action path="/ConceptArt"
            type="org.apache.struts.actions.ForwardAction"
            parameter=".ConceptArt"/>
            
    <action path="/Credits"
            type="org.apache.struts.actions.ForwardAction"
            parameter=".Credits"/>
                
    <action path="/EditUserProfileForRegistration"
            type="org.apache.struts.actions.ForwardAction"
            parameter="/EditUserProfile.do"/>

	<action path="/FrontPage"
            type="org.apache.struts.actions.ForwardAction"
            parameter=".FrontPage"/>

    <action path="/NotImplementedPageFrontPage"
			type="org.apache.struts.actions.ForwardAction"
            parameter=".NotImplementedPageFrontPage"/>
            
    <action path="/Screenshots"
            type="org.apache.struts.actions.ForwardAction"
            parameter=".Screenshots"/>

            
             
    <!-- ========= Admin Actions (/admin/_.do) ========== -->

	<action path="/admin"
            type="org.apache.struts.actions.ForwardAction"
            parameter=".AdminAutentication"></action>
                 
	<action path="/AdminFindUserProfile"
			type="es.engade.thearsmonsters.http.controller.actions.admin.FindUserProfileAction"
            name="loginForm" scope="request" validate="false"
            input=".AdminMainPage">
        <set-property property="adminRequired" value="true"/>
        <forward name="AdminShowUserProfile" 
                 path=".AdminShowUserProfile"/></action>
            
    <action path="/AdminLogin"
			type="es.engade.thearsmonsters.http.controller.actions.admin.LoginAsAdminAction"
            name="loginForm" scope="request" validate="true"
            input=".AdminAutentication">
        <forward name="AdminMainPage" 
                 path=".AdminMainPage"/></action>
                           
	<action path="/AdminToBanUser"
			type="es.engade.thearsmonsters.http.controller.actions.admin.ToBanUser"
            scope="request">
        <set-property property="adminRequired" value="true"/>
        <forward name="AdminShowActionResults" 
                 path=".AdminShowActionResults"/></action>
                 
    <action path="/InsertFixtures"
			type="es.engade.thearsmonsters.http.controller.actions.admin.InsertFixtures"
            scope="request"></action>   
      		 
        



    <!-- ===================================================================
         The standard administrative actions available with Struts. These must 
         be either omitted or protected by security in a real application 
         deployment. 
         =================================================================== -->

    <action path="/admin/addFormBean"
            type="org.apache.struts.actions.AddFormBeanAction"/>
    <action path="/admin/addForward"
            type="org.apache.struts.actions.AddForwardAction"/>
    <action path="/admin/addMapping"
            type="org.apache.struts.actions.AddMappingAction"/>
    <action path="/admin/reload"
            type="org.apache.struts.actions.ReloadAction"/>
    <action path="/admin/removeFormBean"
            type="org.apache.struts.actions.RemoveFormBeanAction"/>
    <action path="/admin/removeForward"
            type="org.apache.struts.actions.RemoveForwardAction"/>
    <action path="/admin/removeMapping"
            type="org.apache.struts.actions.RemoveMappingAction"/>

</action-mappings>

<!-- ============ Front Controller Configuration ========================== -->

<controller 
processorClass="es.engade.thearsmonsters.http.controller.frontcontroller.ThearsmonstersRequestProcessor"/>

<!-- ============ Message Resources Definitions =========================== -->

<message-resources
   parameter="es.engade.thearsmonsters.http.view.messages.Messages"/>

<!-- ============================ Tiles Plugin ============================ -->

<plug-in className="org.apache.struts.tiles.TilesPlugin" >
    <set-property property="definitions-config"
                  value="/WEB-INF/Struts/tiles-defs.xml" />
</plug-in>  

</struts-config>
